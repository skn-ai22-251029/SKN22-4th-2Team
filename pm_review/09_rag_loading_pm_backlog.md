# 📋 RAG 대기 시간(로딩/상태 UI) 전체 백로그 (PM + Frontend 통합)

이 백로그는 Frontend 에이전트가 제안한 `01_rag_loading_status_ui.md`의 기술적 해결 방안(SSE/WebSocket 스트리밍, 스켈레톤 UI, 취소 기능)을 검토하고, PM 관점에서 예외 상황 및 추가적인 UX 시나리오를 보완한 최종 기획 백로그입니다.

## 🚀 Epic 1: RAG 분석 진행 상태 시각화 (UX/UI Core)
사용자에게 긴 대기 시간에 대한 납득 가능한 피드백을 주어 이탈을 방지합니다.

- [ ] [신규 기능] 단계별 상태 표시용 프로그레스/스텝퍼(Stepper) UI 컴포넌트 개발 ("검색 중" → "분석 중" → "결과 생성 중")
- [ ] [UX 개선] RAG 대기 시간 전용 스켈레톤(Skeleton UI) 및 커스텀 애니메이션(예: 문서 스캐닝 애니메이션) 설계
- [ ] [UX 개선] 프로그레스 하단에 전체 예상 소요 시간(~30초) 및 실시간 타이머 게이지바 배치
- [ ] [신규 기능] 실시간 분석 취소(Cancel) 버튼 UI 배치 및 취소 후 원상 복구(입력 폼 상태 유지) 플로우 구현

## ⏳ Epic 2: 스트리밍 인프라 및 통신 연동 (Infrastructure & Data)
클라이언트와 서버 간의 비동기 양방향/스트리밍 통신 인프라를 구축합니다.

- [ ] [API 구현] 상태별 메시지와 최종 결과를 스트리밍 형태로 전송할 수 있는 `Server-Sent Events(SSE)` 또는 `WebSocket` 엔드포인트 구축 (Backend)
- [ ] [API 연동] 프론트엔드 단 EventSource/WebSocket 클라이언트 구현을 통한 실시간 데이터 파싱 로직 작성 (Frontend)
- [ ] [API 구현] 클라이언트 취소(Cancel) 이벤트 발생 시, 동작 중인 LLM 추론 워커(Worker)를 안전하게 중단(Abort)하는 로직 개발 (Backend)

## 🚨 Epic 3: 타임아웃 및 스트리밍 예외 처리 (Error Handling & UX) - **PM 강화**
통신 단절, API 응답 지연, LLM 추론 오류 등 다양한 돌발 상황에 대응하는 UX 전략입니다.

- [ ] [에러 대응] SSE/WebSocket 통신 중단(네트워크 끊김) 시 "서버와의 연결이 불안정합니다. 재연결 중..." 토스트 메시지 및 자동 재시도 로직 구현
- [ ] [에러 대응] 30초 이상의 Extreme Timeout 발생 시, "평소보다 분석 시간이 오래 걸리고 있습니다. 조금만 더 대기해 주세요."라는 안정화 메시지 강제 표출 기능
- [ ] [에러 대응] 검색된 유사 특허가 현저히 부족하여 LLM이 분석할 문서(Context)가 없는 경우, 무한 로딩에 빠지지 않도록 "관련 특허를 찾지 못했습니다" 예외 UI 플로우로 즉시 탈출하도록 설계 (Backend/Frontend 연동)
- [ ] [에러 대응] LLM API Call Limit(토큰 초과 등) 에러 발생 시, 스켈레톤 UI를 즉시 걷어내고 사용자 친화적인 안내("AI 시스템이 혼잡합니다. 잠시 후 재시도해주세요") 모달 팝업 제공
